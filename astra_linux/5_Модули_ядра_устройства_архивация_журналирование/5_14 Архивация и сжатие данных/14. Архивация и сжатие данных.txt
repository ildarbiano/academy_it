План урока:
Сжатие файлов
Архивация файлов
Клонирование дисков
Синхронизация каталогов и файлов rsync
Дополнительные примеры использования rsync
Практическое задание


================ Сжатие файлов =============================================================================
		– это технология уменьшения размера файла на диске с помощью разных алгоритмов и математических вычислений. Сжимать файлы необходимо, чтобы сохранить дисковое пространство и экономить полосы пропускания при использовании сети.
В Linux существует несколько утилит для сжатия файлов: gzip, bzip2 и xz.

Gzip  
Утилита для сжатия файлов с расширением .gz. Предположим, что мы работаем с файлом filename.txt.  Разберём в таблице, какие задачи мы можем выполнять с помощью Gzip.

Bzip2  
Алгоритм сжатия, который использует модификацию алгоритма Бергера для сжатия файлов. Bzip2 способен создавать более компактные сжатые файлы, чем gzip, но при этом требует больше времени на выполнение сжатия.
Разберём в таблице, какие задачи мы можем выполнять с помощью Bzip2.

Xz  
Новый инструмент сжатия в Linux, который обеспечивает ещё более компактный размер файла, чем bzip2, но при этом может быть более медленным в работе.
Разберём в таблице, какие задачи мы можем выполнять с помощью Xz.



================ Архивация файлов в Linux ===============================================================
		позволяет объединить несколько файлов или директорий в один архивный файл, который затем может быть сжат с помощью утилит сжатия (gzip, bzip2, xz).   В Linux для архивации файлов используется утилита tar. 

-------------- Создание архива tar из файлов file1, file2 и директории directory1: ----------------------
tar -cvf archive.tar file1 file2 directory1 
Опции команды tar: 
- c - создание архива 
- v - вывод списка обрабатываемых файлов на экран 
- f - указание имени архива 

-------------- Чтобы добавить файл file3 и директорию directory2 в существующий архив archive.tar -------- 
используем опцию -r: tar -rvf archive.tar file3 directory2 

-------------- Для извлечения файлов из архива используем опцию -x: --------------------------------------
tar -xvf archive.tar 	команда извлечёт все файлы из архива archive.tar в текущую директорию.

-------------- Извлечени конкретного файла file1 из архива archive.tar в текущую директорию: ------------- 
tar -xvf archive.tar file1 

-------------- Сжатие архива tar с помощью gzip: ---------------------------------------------------------
gzip archive.tar 
Эта команда создаст сжатый файл archive.tar.gz и удалит исходный файл archive.tar. 

-------------- Распаковка архива tar.gz: -----------------------------------------------------------------
gzip -d archive.tar.gz
Аналогично можно сжимать и распаковывать архивы с помощью утилит bzip2 и xz.


================ Клонирование дисков в Linux =============================================================
		— это процесс создания точной копии существующего диска или раздела на другом диске. Это может быть полезно для создания резервных копий или для установки Linux на другой компьютер или виртуальную машину. В Linux существует несколько инструментов для клонирования дисков: 
dd
Clonezilla 
gparted.

dd  
Утилита в Linux, которая используется для копирования данных с одного места на другое. Она может использоваться для создания точной копии диска или раздела.
sudo dd if=/dev/sda of=/dev/sdb bs=1M		для клонирования диска в Linux с помощью dd выполняем следующую команду:
/dev/sda 	- исходный диск
/dev/sdb 	- целевой диск, на который мы хотим скопировать данные
bs 		- указывает размер блока данных В приведённом примере размер блока равен 1 МБ.
Команда должна выполняться с правами суперпользователя.

Clonezilla 
Clonezilla 
— это бесплатный инструмент для резервного копирования и клонирования дисков, который основан на Linux. Он обеспечивает поддержку множества файловых систем и может клонировать как отдельные разделы, так и целые диски.
Для использования Clonezilla нужно загрузиться с CD или USB-накопителя, содержащего Clonezilla, и выполнить несколько простых шагов, которые описаны непосредственно самим инструментом.

Gparted 
Gparted 
— это бесплатный инструмент для управления дисками в Linux, который также может использоваться для клонирования дисков.
Для клонирования диска в Linux с помощью Gparted выполните следующие шаги:
Установите Gparted на свой компьютер: 
sudo apt-get install gparted 
Запустите Gparted 
Выберите исходный диск, который вы хотите скопировать, выберите опцию "Копировать"
Выберите целевой диск и выберите опцию "Вставить"
Подтвердите свой выбор и дождитесь завершения процесса клонирования
Перед выполнением операции клонирования, будьте осторожны, поскольку процесс может быть долгим и не может быть отменен после начала операции. Также важно убедиться, что целевой диск достаточно большой, чтобы вместить все данные и файловую систему.

Для того чтобы клонирование диска выполнялось без ошибок, рекомендуется убедиться, что все диски и разделы проинициализированы (то есть определены программой) корректно.

====================== Синхронизация каталогов и файлов rsync ===================================================
Командой rsync можно синхронизировать файлы и каталоги между двумя различными местами на удаленных или локальных серверах. Rsync использует алгоритм сравнения дельт, чтобы сначала определить, какие файлы изменились, а затем копировать их только внесенные изменения.
rsync -av /path/to/source /path/to/destination		команда для синхронизации каталога
/path/to/source 					- исходный каталог, который нужно синхронизировать
/path/to/destination 					- целевой каталог, в который мы хотим скопировать данные
-a 							- режим архива, который сохраняет все метаданные оригинальных файлов
-v 							- режим вывода, который выводит подробную информацию о процессе копирования


Rsync поддерживает возможность работы с удалёнными серверами.  Для этого нужно указать имя пользователя, имя хоста и целевой каталог:
rsync -av user@hostname:/path/to/source /path/to/destination
user 							- имя пользователя 
hostname 						- имя удаленного хоста
/path/to/source 					- исходный каталог на удалённом сервере

Rsync позволяет исключать файлы или каталоги из процесса синхронизации.  Для этого можно использовать опцию --exclude, которая позволяет исключить файлы или каталоги, которые соответствуют шаблону:
rsync -av --exclude='*.txt' /path/to/source /path/to/destination
*.txt 							указывает на все файлы с расширением txt в каталоге /path/to/source, которые нужно исключить.

-------------------- Синхронизация файлов между двумя удалёнными серверами -------------------------------------
- z 							- означает использование сжатия gzip для данных
rsync -avz user1@hostname1:/path/to/source/ user2@hostname2:/path/to/destination/  

-------------------- Синхронизация папки локально с удалённым сервером через SSH -------------------------------
- e &apos;ssh&apos; 					- указывает протокол, используемый для связи с удалённым сервером
rsync -avz -e &apos;ssh&apos; /path/to/source/ user@hostname:/path/to/destination/  

-------------------- Синхронизация папки с удалённого сервера на локальный компьютер ---------------------------
файлы синхронизируются между удаленным сервером и локальной машиной
rsync -avz user@hostname:/path/to/source/ /path/to/destination/  

-------------------- Использование агента SSH при соединении с удалённым сервером ------------------------------  
- A 							- используется для поддержки агента SSH, что позволяет использовать ключи SSH, сохранённые в агенте, вместо копирования их на удалённый сервер
rsync -avz -e &apos;ssh -A&apos; user@hostname:/path/to/source/ /path/to/destination/



=================== дополнительные материалы ===================================================================
Clonezilla. Инструкция на русском	https://any-key.net/clonezilla-instrukciya-na-russkom/
Rsync					http://wiki.opennet.ru/Rsync
Команда dd и все, что с ней связано	https://habr.com/ru/articles/117050/
Руководство пользователя GParted	https://gparted.org/display-doc.php?name=help-manual&lang=ru



=================== Практическое задание	================================================================
Практическое задание «Архивация и сжатие данных»
Время выполнения: 15 мин
Цель практической работы:научиться архивировать и сжимать данные
Задача:
Какая команда используется для создания архива tar из файлов и директорий?
tar -cvf arch.tar file.sh main
file.sh
main/
main/pool/
admilya@astra-net-terminal:~$ ls
arch.tar  dev  file  file.sh  main  update
------------------------------------------

Какую опцию нужно использовать, чтобы добавить файлы и директории в существующий архив tar?
admilya@astra-net-terminal:~$ tar -rvf arch.tar file dev
file
dev/
dev/pool/
admilya@astra-net-terminal:~$ ls
arch.tar  dev  file  file.sh  main  update
------------------------------------------

Какую опцию нужно использовать, чтобы извлечь файлы из архива tar в текущую директорию?
Какую команду нужно использовать, чтобы извлечь конкретный файл из архива tar в текущую директорию?


Как сдать работу на проверку?
- прикрепите файл с ответами на вопросы, нужными командами или скриптами.

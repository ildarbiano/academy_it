План урока:
SMB/CIFS
Конфигурационный файл smb.conf
Настройки директорий
Работа с расшаренными папками
NFS
Ftp-сервер
Анонимный режим работы VSFTP
Практическое задание

========================= SMB/CIFS ====================================================================================
		– это протокол, использующийся для обмена файлами между компьютерами, работающими в сети. 
SMB		Server Message Block
CIFS 		Common Internet File System	 


========================= NFS =========================================================================================
NFS 			Net Files System (сетевая файловая система) позволяет хосту монтировать разделы, находящиеся на удалённом хосте, и использовать их аналогично локальным файловым системам. Это позволяет централизованно хранить файлы и получать к ним полноценный доступ с разных хостов. Для настройки NFS-сервера требуется утилита nfs-kernel-server . 
sudo apt install nfs-kernel-server 
Для работы NFS должна быть включена её поддержка в ядре  (в Astra Linux присутствует поддержка NFS в ядре по умолчанию).
NFS 			использует удалённые вызовы процедур для управления запросами между клиентами и серверами. За это отвечает служба portmap. Когда клиент пытается подключиться к удалённой файловой системе, происходит процедура аутентификации по адресу хоста. После предоставления доступа любые операции с файлами и каталогами отправляются на сервер с использованием RPC.
Portmap 		требуется для сопоставления запросов RPC со службами. 
RPC			протокол удалённого вызова процедур — компонент сетевой файловой системы (NFS), который устанавливает формат взаимодействий «клиент — сервер». Процессы RPC уведомляют portmap при запуске, указывая номер порта, который они слушают. Затем клиентская система связывается с portmap, и та перенаправляет клиента на порт.
portmap 		cлужбу можно использовать с файлами доступа к хосту /etc/hosts.allow и /etc/hosts.deny для управления удалёнными системами, которым разрешено использовать службы на основе RPC на вашем компьютере. Правила контроля доступа для portmap повлияют на все службы на основе RPC.
/etc/exports		Каждая файловая система, экспортируемая удалённым пользователям через NFS, а также права доступа, относящиеся к этим файловым системам, находятся в файле. Этот файл считывается командой exportfs, чтобы предоставить rpc.mountd и rpc.nfsd информацию, необходимую для удалённого монтирования файловой системы авторизованным хостом.
/etc/exports 		 конфигурационный файл NFS. В нём описывается следующий формат:
<директория на NFS сервере, к которой будет дан доступ>
<ip адрес или подсеть, из которой клиенты могут подключаться к NFS серверу>
(<права на файлы в расшаренной папке r — чтение, w — редактирование>
<sync — позволяет серверу не отвечать на запросы, пока файл не будет записан на диск>)
Например:
/srv/data 10.9.8.1(rw) 10.9.0.0/255.255.0.0(ro)
Команда exportfs позволяет выборочно экспортировать или не экспортировать каталоги без перезапуска различных служб NFS. Если изменения в файл /etc/exports были внесены во время работы сервера NFS, то для вступления их в силу необходимо выполнить команду:
sudo exportfs -a
sudo systemctl restart nfs-kernel-server
Защищённой сетевой файловой системой для работы с информацией ограниченного доступа в Astra Linux Special Edition является Samba SMB/CIFS. При работе в Astra Linux Special Edition с включенной политикой мандатного управления доступом (МРД) и обработкой информации ограниченного доступа применять сетевую файловую систему NFS для хранения данных в общем случае не рекомендуется.
		
